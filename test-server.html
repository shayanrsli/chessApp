<!DOCTYPE html>
<html>
<head>
    <title>Simple SignalR Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.min.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { margin: 5px; padding: 10px 20px; }
        #log { margin-top: 20px; padding: 10px; border: 1px solid #ccc; min-height: 200px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>ðŸ§ª ØªØ³Øª Ø³Ø§Ø¯Ù‡ SignalR</h1>
    
    <button onclick="testDirect()">Û±. ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ… (Ø¨Ø¯ÙˆÙ† React)</button>
    <button onclick="clearLog()">ðŸ§¹ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
    
    <div id="log"></div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(msg, type = 'info') {
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = `[${time}] ${msg}`;
            log.appendChild(div);
            log.scrollTop = log.scrollHeight;
        }
        
        function clearLog() {
            log.innerHTML = '';
        }
        
        async function testDirect() {
            try {
                addLog('ðŸš€ Creating SignalR connection...');
                
                // Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ Ù…Ù…Ú©Ù†
                const connection = new signalR.HubConnectionBuilder()
                    .withUrl('http://localhost:5131/chessHub')
                    .withAutomaticReconnect()
                    .build();
                
                connection.on('Connected', (data) => {
                    addLog(`âœ… Connected: ${JSON.stringify(data)}`, 'success');
                });
                
                connection.onclose((error) => {
                    addLog(`ðŸ”Œ Connection closed: ${error}`, 'error');
                });
                
                await connection.start();
                addLog('âœ… SignalR connection established!', 'success');
                
                // ØªØ³Øª Ping
                const pingResult = await connection.invoke('Ping');
                addLog(`ðŸ“ Ping result: ${pingResult}`, 'success');
                
                // ØªØ³Øª Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ø§Ø²ÛŒ
                const gameResult = await connection.invoke('CreateGame', 'Test Game', false);
                addLog(`ðŸŽ® Game created: ${JSON.stringify(gameResult)}`, 'success');
                
            } catch (error) {
                addLog(`âŒ Error: ${error.message}`, 'error');
                console.error('Full error:', error);
            }
        }
        
        // ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø±
        setTimeout(() => {
            testDirect();
        }, 1000);
    </script>
</body>
</html>